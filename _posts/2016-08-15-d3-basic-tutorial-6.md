---
layout: post
title:  "D3 basic tutorial 6"
tags: [D3 tutorial, D3 line chart]
---

[D3](https://d3js.org/) is a JavaScript library for visualizing data in the browser.

This is a basic tutorial on how to create a simple line chart using D3.
The chart will render random data generated by the following function:

```javascript
var data = [];
for (var i = 1; i <= 50; i++) {
  data.push({x: i, y: 1 * (1 + Math.random() / 100)});
}
```

1\. Create a SVG element that will hold the line chart. This SVG element has margins that follow the [margin convetion](https://bl.ocks.org/mbostock/3019563).

```javascript
var margin = {top: 20, right: 30, bottom: 30, left: 50},
    width = 700 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom

var svg = d3.select("#line_chart_20160815").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
```

2\. Set up x and y axis, using [scaleLinear function](https://github.com/d3/d3-scale/blob/master/README.md#linear-scales). [Input domain](https://github.com/d3/d3-scale/blob/master/README.md#continuous_domain) and [Output range](https://github.com/d3/d3-scale/blob/master/README.md#continuous_range) will set the scale of the axes based on the data input, because we're using the [extent function](https://github.com/d3/d3-array#extent). This function returns the minimum and maximum value in the given array using natural order.

```javascript
var x = d3.scaleLinear()
    .range([0, width])
    .domain(d3.extent(data, function(d) { return d.x; }));

var y = d3.scaleLinear()
    .range([height, 0])
    .domain(d3.extent(data, function(d) { return d.y; }));

var xAxis = d3.axisBottom(x);

var yAxis = d3.axisLeft(y);
```

3\. Append x and y axes to the SVG element. To the y axis, append the text element.

```javascript
svg.append("g")
    .attr("class", "x axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xAxis);

svg.append("g")
    .attr("class", "y axis")
    .call(yAxis)
  .append("text")
    .attr("transform", "rotate(-90)")
    .attr("y", 6)
    .attr("dy", ".71em")
    .style("text-anchor", "end")
    .style("fill", "#000")
    .text("Value");
```

4\. Use [line](https://github.com/d3/d3-shape/blob/master/README.md#lines) generator to produce a function that will be set to the [d](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d) attribute in the [path element](http://www.w3schools.com/svg/svg_path.asp). Add the [curve method](https://github.com/d3/d3-shape/blob/master/README.md#curves) that define how to interpolate between two points.

```javascript
var line = d3.line()
    .x(function(d) { return x(d.x); })
    .y(function(d) { return y(d.y); })
    .curve(d3.curveCardinal.tension(0.5));

svg.append("path")
    .datum(data)
    .attr("class", "line")
    .attr("d", line)
    .style("fill", "none")
    .style("stroke", "steelblue")
    .style("stroke-width", "1.5px");
```

And this is the final result...

<div id="line_chart_20160815"></div>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>

(function(){
  var data = [];
  for (var i = 1; i <= 50; i++) {
    data.push({x: i, y: 1 * (1 + Math.random() / 100)});
  }

  var margin = {top: 20, right: 30, bottom: 30, left: 50},
      width = 700 - margin.left - margin.right,
      height = 500 - margin.top - margin.bottom

  var svg = d3.select("#line_chart_20160815").append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
    .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  var x = d3.scaleLinear()
      .range([0, width])
      .domain(d3.extent(data, function(d) { return d.x; }));

  var y = d3.scaleLinear()
      .range([height, 0])
      .domain(d3.extent(data, function(d) { return d.y; }));

  var xAxis = d3.axisBottom(x);

  var yAxis = d3.axisLeft(y);

  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .style("fill", "#000")
      .text("Value");

  var line = d3.line()
      .x(function(d) { return x(d.x); })
      .y(function(d) { return y(d.y); })
      .curve(d3.curveCardinal.tension(0.5));

  svg.append("path")
      .datum(data)
      .attr("class", "line")
      .attr("d", line)
      .style("fill", "none")
      .style("stroke", "steelblue")
      .style("stroke-width", "1.5px");

})()

</script>
